<visual-designer id="{{designer_id}}"></visual-designer>
<script type="text/javascript">
    $(document).ready(function(){
        d_visual_designer.initLocal({{local|json_encode(constant('JSON_FORCE_OBJECT'))}})
        d_visual_designer.initOptions({{options|json_encode(constant('JSON_FORCE_OBJECT'))}})
        d_visual_designer.initState({{state|json_encode(constant('JSON_FORCE_OBJECT') b-or constant('JSON_NUMERIC_CHECK'))|raw}})
        riot.compile({{riot_tags|json_encode}}, function(){
            riot.mount(document.getElementById('{{ designer_id }}'));
        })
    })
</script>